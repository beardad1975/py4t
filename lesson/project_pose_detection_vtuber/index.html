
<!doctype html>
<html lang="zh-Hant" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Py4t 教青少年學Python">
      
      
        <meta name="author" content="Wen-Hung, Chang. 張文宏">
      
      
      <link rel="icon" href="../../material/bridge">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.1.8">
    
    
      
        <title>📚專題閱讀：姿勢偵測與簡易Vtuber - Py4t 教青少年學Python</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6e60f8b8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vtuber" class="md-skip">
          跳轉到
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="Header"
  >

    <!-- Link to home -->
    <a
      href="../.."
      title="Py4t 教青少年學Python"
      class="md-header__button md-logo"
      aria-label="Py4t 教青少年學Python"
      data-md-component="logo"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14v-3.09c-.72-.33-1.39-.73-2-1.2V14h2m-2 4H3v-2H1v-2h2V7h2v1.43C6.8 10 9.27 11 12 11c2.73 0 5.2-1 7-2.57V7h2v7h2v2h-2v2h-2v-2H5v2m12-7.09V14h2V9.71c-.61.47-1.28.87-2 1.2M16 14v-2.68c-.64.23-1.31.4-2 .52V14h2m-3 0v-2.04L12 12l-1-.04V14h2m-3 0v-2.16c-.69-.12-1.36-.29-2-.52V14h2z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Py4t 教青少年學Python
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              📚專題閱讀：姿勢偵測與簡易Vtuber
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette -->
    

    <!-- Site language selector -->
    

    <div class="md-nav__item">
      <a href="https://beardad1975.github.io/py4t/">主網站</a>&nbsp;&nbsp;
      <a href="https://www.nmes.tyc.edu.tw/maker/py4t/">備份網站</a>&nbsp;&nbsp;
      <a href="https://www.facebook.com/groups/856789691692686/">fb社團</a>
    </div>

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜尋" placeholder="搜尋" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜尋引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    

    <!-- Repository information -->
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/plan/" class="md-tabs__link">
        關於
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../download/" class="md-tabs__link">
      下載
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        課程
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../integrated_lib/" class="md-tabs__link">
        函式庫
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../self_study/" class="md-tabs__link">
        影片
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../promotion/activities/" class="md-tabs__link">
        推廣
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../community/society/" class="md-tabs__link">
        社群
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Py4t 教青少年學Python" class="md-nav__button md-logo" aria-label="Py4t 教青少年學Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14v-3.09c-.72-.33-1.39-.73-2-1.2V14h2m-2 4H3v-2H1v-2h2V7h2v1.43C6.8 10 9.27 11 12 11c2.73 0 5.2-1 7-2.57V7h2v7h2v2h-2v2h-2v-2H5v2m12-7.09V14h2V9.71c-.61.47-1.28.87-2 1.2M16 14v-2.68c-.64.23-1.31.4-2 .52V14h2m-3 0v-2.04L12 12l-1-.04V14h2m-3 0v-2.16c-.69-.12-1.36-.29-2-.52V14h2z"/></svg>

    </a>
    Py4t 教青少年學Python
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          關於
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="關於" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          關於
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/plan/" class="md-nav__link">
        ❤️ 計畫緣由
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/idea/" class="md-nav__link">
        🧡 設計理念
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/architecture/" class="md-nav__link">
        💜 軟體架構
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/qa/" class="md-nav__link">
        ❤️ 問答Q&A
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/acknowledge/" class="md-nav__link">
        🧡 銘謝
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        下載
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">課程</a>
          
        </div>
      
      <nav class="md-nav" aria-label="課程" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          課程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          函式庫
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="函式庫" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          函式庫
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrated_lib/" class="md-nav__link">
        索引頁
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../turtle4t/">海龜</a>
          
        </div>
      
      <nav class="md-nav" aria-label="海龜" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          海龜
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../pie4t/">物理</a>
          
        </div>
      
      <nav class="md-nav" aria-label="物理" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          物理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../threed4t/">3D</a>
          
        </div>
      
      <nav class="md-nav" aria-label="3D" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          3D
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../comthink/">運算思維</a>
          
        </div>
      
      <nav class="md-nav" aria-label="運算思維" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          運算思維
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../cv4t/">視覺</a>
          
        </div>
      
      <nav class="md-nav" aria-label="視覺" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          視覺
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" type="checkbox" id="__nav_5_7" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../sound_and_speech/">語音</a>
          
        </div>
      
      <nav class="md-nav" aria-label="語音" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          語音
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../self_study/">影片</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="影片" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          影片
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self_study/quick_start/" class="md-nav__link">
        🕒 快速入門
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self_study/tutorial_3d/" class="md-nav__link">
        🕕 3D模擬
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self_study/tutorial_cv/" class="md-nav__link">
        🕘 視覺影像
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self_study/tutorial_algorithm/" class="md-nav__link">
        🕛 演算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          推廣
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="推廣" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          推廣
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../promotion/activities/" class="md-nav__link">
        💚 推廣紀錄
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../promotion/user_feedback/" class="md-nav__link">
        💙 使用回饋
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../promotion/teaching/" class="md-nav__link">
        🧡 教學資料
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          社群
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="社群" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          社群
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/society/" class="md-nav__link">
        👨‍👩‍👧‍👦 fb社團與Py4t練功坊
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/name_change/" class="md-nav__link">
        👨‍👩‍👧‍👦 [討論]名稱更改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/website_howto/" class="md-nav__link">
        👨‍👩‍👧‍👦 [問答]Py4t網站製作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/source_guide/" class="md-nav__link">
        👨‍👩‍👧‍👦 [問答]架構與原始碼導覽
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    📕 引言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    📗 認識姿勢偵測(1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    📒 構思
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    📘 程式探究(8)
  </a>
  
    <nav class="md-nav" aria-label="📘 程式探究(8)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    程式架構
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3d" class="md-nav__link">
    攝影機與3D貼圖
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    虛擬人物設計
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    視覺提示與回饋
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    頭部互動
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    身體互動
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    手部互動
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vtuber_1" class="md-nav__link">
    簡易Vtuber
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    📗 姿勢偵測應用
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="vtuber">📚專題閱讀：姿勢偵測與簡易Vtuber</h1>
<hr />
<h2 id="_1">📕 引言</h2>
<hr />
<p>什麼是Vtuber？</p>
<dl>
<dt><br/></dt>
<dd>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/Kxgve6-gQFI?start=0&amp;end=130" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
</dd>
<dd>
<p><sup>(2分10秒, 資料來源:</sup><sup id="fnref:what_is_vtuber"><a class="footnote-ref" href="#fn:what_is_vtuber">1</a></sup><sup>)</sup></p>
</dd>
</dl>
<p><br/></p>
<p>Vtuber就是「利用動態捕捉程式達成虛擬形象與真的人結合的角色」</p>
<dl>
<dt>下圖是具有手勢追蹤功能的 vtuber的圖例。</dt>
<dd>
<p><img alt="immanuelle_wave" src="immanuelle_wave.gif" /></p>
</dd>
<dd>
<p><sup>(資料來源:</sup><sup id="fnref:immanuelle_wave"><a class="footnote-ref" href="#fn:immanuelle_wave">2</a></sup><sup>)</sup></p>
</dd>
</dl>
<p><br/></p>
<details class="info">
<summary>建議先備課程</summary>
<p>在學習本專題前，建議先體驗過以下課程 </p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"/></svg></span> <a href="../hand_detection_motion_control/" target="_blank">「手部偵測與體感互動」</a> </p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"/></svg></span> <a href="../explore3d/" target="_blank">「探索3D空間」</a></p>
<p>在學習概念銜接上會較為平順。</p>
</details>
<p><br/><br/><br/> </p>
<hr />
<h2 id="1">📗 認識姿勢偵測(1)</h2>
<hr />
<dl>
<dd><img alt="pose_landmarks_index" src="pose_landmarks_index.png" /></dd>
<dd><sup>(資料來源:</sup><sup id="fnref:pose_landmarks"><a class="footnote-ref" href="#fn:pose_landmarks">3</a></sup><sup>)</sup></dd>
</dl>
<p><br/></p>
<table>
<thead>
<tr>
<th align="center">索引值</th>
<th align="center">特徵說明</th>
<th align="center">英文</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">0</td>
<td align="center">鼻子</td>
<td align="center">nose</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">左眼(內)</td>
<td align="center">left eye (inner)</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">左眼</td>
<td align="center">left eye</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">左眼(外)</td>
<td align="center">left eye (outer)</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">右眼(內)</td>
<td align="center">right eye (inner)</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">右眼</td>
<td align="center">right eye</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">右眼(外)</td>
<td align="center">right eye (outer)</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">左耳</td>
<td align="center">left ear</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">右耳</td>
<td align="center">right ear</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">嘴巴(左)</td>
<td align="center">mouth (left)</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">嘴巴(右)</td>
<td align="center">mouth (right)</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">左肩</td>
<td align="center">left shoulder</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">右肩</td>
<td align="center">right shoulder</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">左手肘</td>
<td align="center">left elbow</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">右手肘</td>
<td align="center">right elbow</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">左手腕</td>
<td align="center">left wrist</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">右手腕</td>
<td align="center">right wrist</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">左小指</td>
<td align="center">left pinky</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">右小指</td>
<td align="center">right pinky</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">左食指</td>
<td align="center">left index</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">右食指</td>
<td align="center">right index</td>
</tr>
<tr>
<td align="center">21</td>
<td align="center">左拇指</td>
<td align="center">left thumb</td>
</tr>
<tr>
<td align="center">22</td>
<td align="center">右拇指</td>
<td align="center">right thumb</td>
</tr>
<tr>
<td align="center">23</td>
<td align="center">左髖關節</td>
<td align="center">left hip</td>
</tr>
<tr>
<td align="center">24</td>
<td align="center">右髖關節</td>
<td align="center">right hip</td>
</tr>
<tr>
<td align="center">25</td>
<td align="center">左膝蓋</td>
<td align="center">left knee</td>
</tr>
<tr>
<td align="center">26</td>
<td align="center">右膝蓋</td>
<td align="center">right knee</td>
</tr>
<tr>
<td align="center">27</td>
<td align="center">左踝關節</td>
<td align="center">left ankle</td>
</tr>
<tr>
<td align="center">28</td>
<td align="center">右踝關節</td>
<td align="center">right ankle</td>
</tr>
<tr>
<td align="center">29</td>
<td align="center">左腳後跟</td>
<td align="center">left heel</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">右腳後跟</td>
<td align="center">right heel</td>
</tr>
<tr>
<td align="center">31</td>
<td align="center">左二腳趾</td>
<td align="center">left foot index</td>
</tr>
<tr>
<td align="center">32</td>
<td align="center">右二腳趾</td>
<td align="center">right foot index</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p><br/></p>
<details class="example" open="open">
<summary>範例程式 姿勢偵測 - - - - - - - (姿勢偵測 1/1)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 4 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">while</span> <span class="kc">True</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="11 "></span>        <span class="n">標記Pose</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="12 "></span>    <span class="n">顯示影像</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/><br/><br/> </p>
<hr />
<h2 id="_2">📒 構思</h2>
<hr />
<dl>
<dd><img alt="vtuber_idea" src="vtuber_idea.png" /></dd>
</dl>
<p><br/><br/><br/> </p>
<hr />
<h2 id="8">📘 程式探究(8)</h2>
<h3 id="_3"><strong><em>程式架構</em></strong></h3>
<hr />
<details class="example">
<summary>程式架構 - - - - - - - (程式閱讀 1/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="c1"># 感應區大家</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos="11 "></span>    <span class="c1"># 設置頭角度 </span>
<span class="linenos" data-linenos="12 "></span>    <span class="c1"># 設置身體角度</span>
<span class="linenos" data-linenos="13 "></span>    <span class="c1"># 設置手角度</span>
<span class="linenos" data-linenos="14 "></span>    <span class="c1"># 畫感應區</span>
<span class="linenos" data-linenos="15 "></span>    <span class="c1"># 繪製介面</span>
<span class="linenos" data-linenos="16 "></span>    <span class="c1"># 標記偵測位置</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="19 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">pass</span>
<span class="linenos" data-linenos="21 "></span>    <span class="c1"># 影像擷取</span>
<span class="linenos" data-linenos="22 "></span>    <span class="c1"># 偵測動作</span>
<span class="linenos" data-linenos="23 "></span>    <span class="c1"># 虛擬人物</span>
<span class="linenos" data-linenos="24 "></span>    <span class="c1"># 呼叫函式</span>
<span class="linenos" data-linenos="25 "></span>
<span class="linenos" data-linenos="26 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br></p>
<hr />
<h3 id="3d"><strong><em> 攝影機與3D貼圖 </em></strong></h3>
<hr />
<dl>
<dd><img alt="camera_image_in_3d" src="camera_image_in_3d.jpg" /></dd>
</dl>
<p><br/></p>
<details class="example">
<summary>範例程式 攝影機與3D貼圖 - - - - - - - (程式閱讀 2/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos=" 5 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 6 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos="10 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos="11 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="c1">##### 主要迴圈</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="18 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="19 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>  
<span class="linenos" data-linenos="20 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br></p>
<hr />
<h3 id="_4"><strong><em> 虛擬人物設計 </em></strong></h3>
<hr />
<dl>
<dd><img alt="custom_material" src="custom_material.jpg" /></dd>
<dd><img alt="figure_and_bg" src="figure_and_bg.jpg" /></dd>
</dl>
<p><br/></p>
<details class="example">
<summary>範例程式 虛擬人物與背景 - - - - - - - (程式閱讀 3/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos=" 9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos="10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos="14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos="15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos="16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos="19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos="20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos="21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos="25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos="27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos="28 "></span>
<span class="linenos" data-linenos="29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos="30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos="31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="32 "></span>
<span class="linenos" data-linenos="33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos="34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos="36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos="39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos="40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="41 "></span>
<span class="linenos" data-linenos="42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos="43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos="45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos="46 "></span>
<span class="linenos" data-linenos="47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos="48 "></span>
<span class="linenos" data-linenos="49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos="50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos="51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos="52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos="53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos="54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos="55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos="56 "></span>
<span class="linenos" data-linenos="57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos="58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos="59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos="60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos="61 "></span>
<span class="linenos" data-linenos="62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos="63 "></span>
<span class="linenos" data-linenos="64 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos="65 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="66 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="67 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="68 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="69 "></span>
<span class="linenos" data-linenos="70 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="71 "></span>
<span class="linenos" data-linenos="72 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="73 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="74 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="75 "></span>    <span class="n">同步手與肩</span><span class="p">()</span> 
<span class="linenos" data-linenos="76 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="77 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>  
<span class="linenos" data-linenos="78 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="79 "></span>
<span class="linenos" data-linenos="80 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/></p>
<hr />
<h3 id="_5"><strong><em> 視覺提示與回饋 </em></strong></h3>
<hr />
<dl>
<dd><img alt="feedback_and_hint" src="feedback_and_hint.png" />
<br/></dd>
</dl>
<details class="example">
<summary>範例程式 視覺提示與回饋 - - - - - - - (程式閱讀 4/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  4 "></span>
<span class="linenos" data-linenos="  5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  7 "></span>
<span class="linenos" data-linenos="  8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos="  9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 12 "></span>
<span class="linenos" data-linenos=" 13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos=" 15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos=" 17 "></span>
<span class="linenos" data-linenos=" 18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos=" 21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos=" 23 "></span>
<span class="linenos" data-linenos=" 24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 28 "></span>
<span class="linenos" data-linenos=" 29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 32 "></span>
<span class="linenos" data-linenos=" 33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 41 "></span>
<span class="linenos" data-linenos=" 42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 46 "></span>
<span class="linenos" data-linenos=" 47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos=" 48 "></span>
<span class="linenos" data-linenos=" 49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos=" 50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos=" 51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos=" 52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 56 "></span>
<span class="linenos" data-linenos=" 57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos=" 59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos=" 60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos=" 63 "></span><span class="k">def</span> <span class="nf">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 64 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 65 "></span>    <span class="k">if</span> <span class="n">感應區x0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點x</span> <span class="o">&lt;</span> <span class="n">感應區x1</span> <span class="ow">and</span> \
<span class="linenos" data-linenos=" 66 "></span>            <span class="n">感應區y0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點y</span> <span class="o">&lt;</span> <span class="n">感應區y1</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="k">return</span> <span class="kc">True</span>
<span class="linenos" data-linenos=" 68 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos" data-linenos=" 70 "></span>
<span class="linenos" data-linenos=" 71 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos=" 72 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos=" 73 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos=" 74 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos=" 75 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos=" 76 "></span>
<span class="linenos" data-linenos=" 77 "></span><span class="k">def</span> <span class="nf">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">):</span>
<span class="linenos" data-linenos=" 78 "></span>    <span class="n">畫矩形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos=" 79 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x0</span><span class="p">,</span><span class="n">感應區y0</span><span class="p">),</span>
<span class="linenos" data-linenos=" 80 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x1</span><span class="p">,</span><span class="n">感應區y1</span><span class="p">),</span>
<span class="linenos" data-linenos=" 81 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos=" 82 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos=" 83 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos=" 85 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos=" 86 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos=" 87 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">-</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos=" 88 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos=" 89 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos=" 90 "></span>
<span class="linenos" data-linenos=" 91 "></span><span class="k">def</span> <span class="nf">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 92 "></span>    <span class="n">陣列</span><span class="p">[</span><span class="mi">440</span><span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 93 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 94 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;請將臉置於感應區內&#39;</span>
<span class="linenos" data-linenos=" 95 "></span>        <span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">]</span> <span class="o">=</span> \
<span class="linenos" data-linenos=" 96 "></span>            <span class="n">調整亮度</span><span class="p">(</span><span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">],</span> <span class="mi">80</span><span class="p">)</span>
<span class="linenos" data-linenos=" 97 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 98 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;鼻子對準十字後，用頭與手控制VTuber&#39;</span>
<span class="linenos" data-linenos=" 99 "></span>
<span class="linenos" data-linenos="100 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="101 "></span>            <span class="n">text</span><span class="o">=</span><span class="n">文字</span><span class="p">,</span>
<span class="linenos" data-linenos="102 "></span>            <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">440</span><span class="p">))</span>
<span class="linenos" data-linenos="103 "></span>
<span class="linenos" data-linenos="104 "></span><span class="k">def</span> <span class="nf">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="105 "></span>    <span class="n">鼻關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="106 "></span>
<span class="linenos" data-linenos="107 "></span>
<span class="linenos" data-linenos="108 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="109 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">鼻關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="110 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="111 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
<span class="linenos" data-linenos="112 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="113 "></span>
<span class="linenos" data-linenos="114 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="115 "></span>
<span class="linenos" data-linenos="116 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="117 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="118 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="119 "></span>    <span class="n">同步手與肩</span><span class="p">()</span>    
<span class="linenos" data-linenos="120 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="121 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="122 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="123 "></span>
<span class="linenos" data-linenos="124 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="125 "></span>        <span class="n">特徵清單</span> <span class="o">=</span> <span class="n">取出PoseLandmarks</span><span class="p">(</span><span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="126 "></span>        <span class="k">if</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="127 "></span>            <span class="n">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="128 "></span>        <span class="n">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>       
<span class="linenos" data-linenos="129 "></span>    <span class="n">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="130 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="131 "></span>
<span class="linenos" data-linenos="132 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/>
<br/></p>
<hr />
<h3 id="_6"><strong><em> 頭部互動 </em></strong></h3>
<hr />
<dl>
<dd><img alt="head_motion" src="head_motion.png" />
<br/></dd>
</dl>
<details class="example">
<summary>範例程式 頭部互動 - - - - - - - (程式閱讀 5/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  4 "></span>
<span class="linenos" data-linenos="  5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  7 "></span>
<span class="linenos" data-linenos="  8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos="  9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 12 "></span>
<span class="linenos" data-linenos=" 13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos=" 15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos=" 17 "></span>
<span class="linenos" data-linenos=" 18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos=" 21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos=" 23 "></span>
<span class="linenos" data-linenos=" 24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 28 "></span>
<span class="linenos" data-linenos=" 29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 32 "></span>
<span class="linenos" data-linenos=" 33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 41 "></span>
<span class="linenos" data-linenos=" 42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 46 "></span>
<span class="linenos" data-linenos=" 47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos=" 48 "></span>
<span class="linenos" data-linenos=" 49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos=" 50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos=" 51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos=" 52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 56 "></span>
<span class="linenos" data-linenos=" 57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos=" 59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos=" 60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos=" 63 "></span><span class="k">def</span> <span class="nf">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 64 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 65 "></span>    <span class="k">if</span> <span class="n">感應區x0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點x</span> <span class="o">&lt;</span> <span class="n">感應區x1</span> <span class="ow">and</span> \
<span class="linenos" data-linenos=" 66 "></span>            <span class="n">感應區y0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點y</span> <span class="o">&lt;</span> <span class="n">感應區y1</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="k">return</span> <span class="kc">True</span>
<span class="linenos" data-linenos=" 68 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos" data-linenos=" 70 "></span>
<span class="linenos" data-linenos=" 71 "></span><span class="k">def</span> <span class="nf">設置頭角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 72 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 73 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 74 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 75 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos=" 76 "></span>
<span class="linenos" data-linenos=" 77 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    
<span class="linenos" data-linenos=" 78 "></span>    <span class="c1"># 頭旋轉y 左到右範圍: 90 ~ -90</span>
<span class="linenos" data-linenos=" 79 "></span>    <span class="k">if</span> <span class="n">鼻子特徵點x</span> <span class="o">&gt;</span> <span class="n">感應區中心x</span><span class="p">:</span> <span class="c1"># 向右</span>
<span class="linenos" data-linenos=" 80 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">鼻子特徵點x</span> <span class="o">-</span> <span class="n">感應區中心x</span><span class="p">)</span>
<span class="linenos" data-linenos=" 81 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos=" 82 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">delta</span>
<span class="linenos" data-linenos=" 83 "></span>    <span class="k">else</span><span class="p">:</span> <span class="c1"># 向左</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">感應區中心x</span> <span class="o">-</span> <span class="n">鼻子特徵點x</span>
<span class="linenos" data-linenos=" 85 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos=" 86 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">delta</span>
<span class="linenos" data-linenos=" 87 "></span>
<span class="linenos" data-linenos=" 88 "></span>    <span class="c1"># 頭旋轉y 下到上範圍: -90 ~ 90</span>
<span class="linenos" data-linenos=" 89 "></span>    <span class="c1"># y座標越往下越大</span>
<span class="linenos" data-linenos=" 90 "></span>    <span class="k">if</span> <span class="n">鼻子特徵點y</span> <span class="o">&gt;</span> <span class="n">感應區中心y</span><span class="p">:</span> <span class="c1"># 向下</span>
<span class="linenos" data-linenos=" 91 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">鼻子特徵點y</span> <span class="o">-</span> <span class="n">感應區中心y</span><span class="p">)</span>
<span class="linenos" data-linenos=" 92 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">60</span> <span class="k">else</span> <span class="o">-</span><span class="mi">60</span>
<span class="linenos" data-linenos=" 93 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos=" 94 "></span>    <span class="k">else</span><span class="p">:</span> <span class="c1"># 向上</span>
<span class="linenos" data-linenos=" 95 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區中心y</span> <span class="o">-</span> <span class="n">鼻子特徵點y</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span>
<span class="linenos" data-linenos=" 96 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">60</span> <span class="k">else</span> <span class="mi">60</span>
<span class="linenos" data-linenos=" 97 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos=" 98 "></span>
<span class="linenos" data-linenos=" 99 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos="100 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="101 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="102 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="103 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="104 "></span>
<span class="linenos" data-linenos="105 "></span><span class="k">def</span> <span class="nf">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">):</span>
<span class="linenos" data-linenos="106 "></span>    <span class="n">畫矩形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="107 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x0</span><span class="p">,</span><span class="n">感應區y0</span><span class="p">),</span>
<span class="linenos" data-linenos="108 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x1</span><span class="p">,</span><span class="n">感應區y1</span><span class="p">),</span>
<span class="linenos" data-linenos="109 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="110 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="111 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="112 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="113 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="114 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="115 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">-</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="116 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="117 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="118 "></span>
<span class="linenos" data-linenos="119 "></span><span class="k">def</span> <span class="nf">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="120 "></span>    <span class="n">陣列</span><span class="p">[</span><span class="mi">440</span><span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="121 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="122 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;請將臉置於感應區內&#39;</span>
<span class="linenos" data-linenos="123 "></span>        <span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">]</span> <span class="o">=</span> \
<span class="linenos" data-linenos="124 "></span>            <span class="n">調整亮度</span><span class="p">(</span><span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">],</span> <span class="mi">80</span><span class="p">)</span>
<span class="linenos" data-linenos="125 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="126 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;鼻子對準十字後，用頭與手控制VTuber&#39;</span>
<span class="linenos" data-linenos="127 "></span>
<span class="linenos" data-linenos="128 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="129 "></span>            <span class="n">text</span><span class="o">=</span><span class="n">文字</span><span class="p">,</span>
<span class="linenos" data-linenos="130 "></span>            <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">440</span><span class="p">))</span>
<span class="linenos" data-linenos="131 "></span>
<span class="linenos" data-linenos="132 "></span><span class="k">def</span> <span class="nf">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="133 "></span>    <span class="n">鼻關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="134 "></span>
<span class="linenos" data-linenos="135 "></span>
<span class="linenos" data-linenos="136 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="137 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">鼻關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="138 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="139 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
<span class="linenos" data-linenos="140 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="141 "></span>
<span class="linenos" data-linenos="142 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="143 "></span>
<span class="linenos" data-linenos="144 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="145 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="146 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="147 "></span>    <span class="n">同步手與肩</span><span class="p">()</span>    
<span class="linenos" data-linenos="148 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="149 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="150 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="151 "></span>
<span class="linenos" data-linenos="152 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="153 "></span>        <span class="n">特徵清單</span> <span class="o">=</span> <span class="n">取出PoseLandmarks</span><span class="p">(</span><span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="154 "></span>        <span class="k">if</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="155 "></span>            <span class="n">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="156 "></span>        <span class="n">設置頭角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="157 "></span>        <span class="n">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>       
<span class="linenos" data-linenos="158 "></span>    <span class="n">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="159 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="160 "></span>
<span class="linenos" data-linenos="161 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/><br/></p>
<hr />
<h3 id="_7"><strong><em> 身體互動 </em></strong></h3>
<hr />
<dl>
<dd><img alt="landmarks_depth" src="landmarks_depth.png" />
<br/></dd>
</dl>
<details class="example">
<summary>範例程式 身體互動 - - - - - - - (程式閱讀 6/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  4 "></span>
<span class="linenos" data-linenos="  5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  7 "></span>
<span class="linenos" data-linenos="  8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos="  9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 12 "></span>
<span class="linenos" data-linenos=" 13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos=" 15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos=" 17 "></span>
<span class="linenos" data-linenos=" 18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos=" 21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos=" 23 "></span>
<span class="linenos" data-linenos=" 24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 28 "></span>
<span class="linenos" data-linenos=" 29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 32 "></span>
<span class="linenos" data-linenos=" 33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 41 "></span>
<span class="linenos" data-linenos=" 42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 46 "></span>
<span class="linenos" data-linenos=" 47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos=" 48 "></span>
<span class="linenos" data-linenos=" 49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos=" 50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos=" 51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos=" 52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 56 "></span>
<span class="linenos" data-linenos=" 57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos=" 59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos=" 60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos=" 63 "></span><span class="k">def</span> <span class="nf">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 64 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 65 "></span>    <span class="k">if</span> <span class="n">感應區x0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點x</span> <span class="o">&lt;</span> <span class="n">感應區x1</span> <span class="ow">and</span> \
<span class="linenos" data-linenos=" 66 "></span>            <span class="n">感應區y0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點y</span> <span class="o">&lt;</span> <span class="n">感應區y1</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="k">return</span> <span class="kc">True</span>
<span class="linenos" data-linenos=" 68 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos" data-linenos=" 70 "></span>
<span class="linenos" data-linenos=" 71 "></span><span class="k">def</span> <span class="nf">設置身體角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 72 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 73 "></span>        <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 74 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos=" 75 "></span>
<span class="linenos" data-linenos=" 76 "></span>    <span class="k">global</span> <span class="n">上次身體轉向</span>
<span class="linenos" data-linenos=" 77 "></span>    <span class="c1"># 身體 旋轉y範圍 left 90 ~ right -90</span>
<span class="linenos" data-linenos=" 78 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="mf">0.2</span><span class="o">*</span><span class="p">(</span><span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="o">-</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">))</span>
<span class="linenos" data-linenos=" 79 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span> <span class="k">if</span> <span class="n">身體轉向</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos=" 80 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span> <span class="k">if</span> <span class="n">身體轉向</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos=" 81 "></span>    <span class="c1">#防抖動 保持穩定</span>
<span class="linenos" data-linenos=" 82 "></span>    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">身體轉向</span> <span class="o">-</span> <span class="n">上次身體轉向</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="linenos" data-linenos=" 83 "></span>        <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體轉向</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="n">上次身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span>
<span class="linenos" data-linenos=" 85 "></span>
<span class="linenos" data-linenos=" 86 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos=" 87 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos=" 88 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos=" 89 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos=" 90 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos=" 91 "></span>
<span class="linenos" data-linenos=" 92 "></span><span class="k">def</span> <span class="nf">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">):</span>
<span class="linenos" data-linenos=" 93 "></span>    <span class="n">畫矩形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos=" 94 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x0</span><span class="p">,</span><span class="n">感應區y0</span><span class="p">),</span>
<span class="linenos" data-linenos=" 95 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x1</span><span class="p">,</span><span class="n">感應區y1</span><span class="p">),</span>
<span class="linenos" data-linenos=" 96 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos=" 97 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos=" 98 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos=" 99 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="100 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="101 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="102 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">-</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="103 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="104 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="105 "></span>
<span class="linenos" data-linenos="106 "></span><span class="k">def</span> <span class="nf">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="107 "></span>    <span class="n">陣列</span><span class="p">[</span><span class="mi">440</span><span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="108 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="109 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;請將臉置於感應區內&#39;</span>
<span class="linenos" data-linenos="110 "></span>        <span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">]</span> <span class="o">=</span> \
<span class="linenos" data-linenos="111 "></span>            <span class="n">調整亮度</span><span class="p">(</span><span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">],</span> <span class="mi">80</span><span class="p">)</span>
<span class="linenos" data-linenos="112 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="113 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;鼻子對準十字後，用頭與手控制VTuber&#39;</span>
<span class="linenos" data-linenos="114 "></span>
<span class="linenos" data-linenos="115 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="116 "></span>            <span class="n">text</span><span class="o">=</span><span class="n">文字</span><span class="p">,</span>
<span class="linenos" data-linenos="117 "></span>            <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">440</span><span class="p">))</span>
<span class="linenos" data-linenos="118 "></span>
<span class="linenos" data-linenos="119 "></span><span class="k">def</span> <span class="nf">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="120 "></span>    <span class="n">鼻關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="121 "></span>    <span class="n">左肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="linenos" data-linenos="122 "></span>    <span class="n">左手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
<span class="linenos" data-linenos="123 "></span>    <span class="n">右肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
<span class="linenos" data-linenos="124 "></span>    <span class="n">右手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span>
<span class="linenos" data-linenos="125 "></span>    <span class="n">左肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos" data-linenos="126 "></span>    <span class="n">右肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> 
<span class="linenos" data-linenos="127 "></span>
<span class="linenos" data-linenos="128 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="129 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">鼻關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="130 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="131 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
<span class="linenos" data-linenos="132 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="133 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="134 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">左肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="135 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="136 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="137 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="138 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="139 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">右肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="140 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="141 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="142 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="143 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="144 "></span>        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">左肩深度</span><span class="p">),</span>
<span class="linenos" data-linenos="145 "></span>        <span class="n">pos</span><span class="o">=</span><span class="n">左肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="146 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
<span class="linenos" data-linenos="147 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="148 "></span>        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">右肩深度</span><span class="p">),</span>
<span class="linenos" data-linenos="149 "></span>        <span class="n">pos</span><span class="o">=</span><span class="n">右肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="150 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
<span class="linenos" data-linenos="151 "></span>
<span class="linenos" data-linenos="152 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="153 "></span>
<span class="linenos" data-linenos="154 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="155 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="156 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="157 "></span>    <span class="n">同步手與肩</span><span class="p">()</span>    
<span class="linenos" data-linenos="158 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="159 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="160 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="161 "></span>
<span class="linenos" data-linenos="162 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="163 "></span>        <span class="n">特徵清單</span> <span class="o">=</span> <span class="n">取出PoseLandmarks</span><span class="p">(</span><span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="164 "></span>        <span class="k">if</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="165 "></span>            <span class="n">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="166 "></span>        <span class="n">設置身體角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="167 "></span>        <span class="n">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>       
<span class="linenos" data-linenos="168 "></span>    <span class="n">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="169 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="170 "></span>
<span class="linenos" data-linenos="171 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/>
<br/></p>
<hr />
<h3 id="_8"><strong><em> 手部互動 </em></strong></h3>
<hr />
<dl>
<dd><img alt="hand_motion" src="hand_motion.png" />
<br/></dd>
</dl>
<details class="example">
<summary>範例程式 手部互動 - - - - - - - (程式閱讀 7/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  4 "></span>
<span class="linenos" data-linenos="  5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  7 "></span>
<span class="linenos" data-linenos="  8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos="  9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 12 "></span>
<span class="linenos" data-linenos=" 13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos=" 15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos=" 17 "></span>
<span class="linenos" data-linenos=" 18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos=" 21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos=" 23 "></span>
<span class="linenos" data-linenos=" 24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 28 "></span>
<span class="linenos" data-linenos=" 29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 32 "></span>
<span class="linenos" data-linenos=" 33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 41 "></span>
<span class="linenos" data-linenos=" 42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 46 "></span>
<span class="linenos" data-linenos=" 47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos=" 48 "></span>
<span class="linenos" data-linenos=" 49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos=" 50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos=" 51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos=" 52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 56 "></span>
<span class="linenos" data-linenos=" 57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos=" 59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos=" 60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos=" 63 "></span><span class="k">def</span> <span class="nf">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 64 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 65 "></span>    <span class="k">if</span> <span class="n">感應區x0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點x</span> <span class="o">&lt;</span> <span class="n">感應區x1</span> <span class="ow">and</span> \
<span class="linenos" data-linenos=" 66 "></span>            <span class="n">感應區y0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點y</span> <span class="o">&lt;</span> <span class="n">感應區y1</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="k">return</span> <span class="kc">True</span>
<span class="linenos" data-linenos=" 68 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos" data-linenos=" 70 "></span>
<span class="linenos" data-linenos=" 71 "></span><span class="k">def</span> <span class="nf">設置手角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 72 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 73 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 74 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 75 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 76 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 77 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos=" 78 "></span>
<span class="linenos" data-linenos=" 79 "></span>    <span class="c1"># 左手抬起 高度門檻值</span>
<span class="linenos" data-linenos=" 80 "></span>    <span class="n">左手特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>    
<span class="linenos" data-linenos=" 81 "></span>    <span class="k">if</span> <span class="n">左手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 82 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">左手特徵點y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos=" 83 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 85 "></span>
<span class="linenos" data-linenos=" 86 "></span>    <span class="c1"># 左肩特徵到左手特徵距離 決定旋轉z</span>
<span class="linenos" data-linenos=" 87 "></span>    <span class="n">左手特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>  
<span class="linenos" data-linenos=" 88 "></span>    <span class="n">左肩特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos" data-linenos=" 89 "></span>    <span class="k">if</span> <span class="n">左手特徵點x</span> <span class="o">&lt;</span> <span class="n">左肩特徵點x</span> <span class="ow">and</span> <span class="n">左手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 90 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">左肩特徵點x</span> <span class="o">-</span> <span class="n">左手特徵點x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos=" 91 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos=" 92 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos=" 93 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 94 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 95 "></span>
<span class="linenos" data-linenos=" 96 "></span>    <span class="c1"># 右手抬起 高度門檻值</span>
<span class="linenos" data-linenos=" 97 "></span>    <span class="n">右手特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>    
<span class="linenos" data-linenos=" 98 "></span>    <span class="k">if</span> <span class="n">右手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 99 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">右手特徵點y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="100 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="101 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="102 "></span>
<span class="linenos" data-linenos="103 "></span>    <span class="c1"># 右肩特徵到右手特徵距離 決定旋轉z</span>
<span class="linenos" data-linenos="104 "></span>    <span class="n">右手特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>  
<span class="linenos" data-linenos="105 "></span>    <span class="n">右肩特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="linenos" data-linenos="106 "></span>    <span class="k">if</span> <span class="n">右手特徵點x</span> <span class="o">&gt;</span> <span class="n">右肩特徵點x</span> <span class="ow">and</span> <span class="n">右手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos="107 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">右手特徵點x</span> <span class="o">-</span> <span class="n">右肩特徵點x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="108 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos="109 "></span>        <span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
<span class="linenos" data-linenos="110 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos="111 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="112 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="113 "></span>
<span class="linenos" data-linenos="114 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos="115 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="116 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="117 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="118 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="119 "></span>
<span class="linenos" data-linenos="120 "></span><span class="k">def</span> <span class="nf">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">):</span>
<span class="linenos" data-linenos="121 "></span>    <span class="n">畫矩形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="122 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x0</span><span class="p">,</span><span class="n">感應區y0</span><span class="p">),</span>
<span class="linenos" data-linenos="123 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x1</span><span class="p">,</span><span class="n">感應區y1</span><span class="p">),</span>
<span class="linenos" data-linenos="124 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="125 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="126 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="127 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="128 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="129 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="130 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">-</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="131 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="132 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="133 "></span>
<span class="linenos" data-linenos="134 "></span><span class="k">def</span> <span class="nf">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="135 "></span>    <span class="n">陣列</span><span class="p">[</span><span class="mi">440</span><span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="136 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="137 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;請將臉置於感應區內&#39;</span>
<span class="linenos" data-linenos="138 "></span>        <span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">]</span> <span class="o">=</span> \
<span class="linenos" data-linenos="139 "></span>            <span class="n">調整亮度</span><span class="p">(</span><span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">],</span> <span class="mi">80</span><span class="p">)</span>
<span class="linenos" data-linenos="140 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="141 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;鼻子對準十字後，用頭與手控制VTuber&#39;</span>
<span class="linenos" data-linenos="142 "></span>
<span class="linenos" data-linenos="143 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="144 "></span>            <span class="n">text</span><span class="o">=</span><span class="n">文字</span><span class="p">,</span>
<span class="linenos" data-linenos="145 "></span>            <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">440</span><span class="p">))</span>
<span class="linenos" data-linenos="146 "></span>
<span class="linenos" data-linenos="147 "></span><span class="k">def</span> <span class="nf">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="148 "></span>    <span class="n">鼻關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="149 "></span>    <span class="n">左肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="linenos" data-linenos="150 "></span>    <span class="n">左手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
<span class="linenos" data-linenos="151 "></span>    <span class="n">右肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
<span class="linenos" data-linenos="152 "></span>    <span class="n">右手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span>
<span class="linenos" data-linenos="153 "></span>    <span class="n">左肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos" data-linenos="154 "></span>    <span class="n">右肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> 
<span class="linenos" data-linenos="155 "></span>
<span class="linenos" data-linenos="156 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="157 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">鼻關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="158 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="159 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
<span class="linenos" data-linenos="160 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="161 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="162 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">左肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="163 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="164 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="165 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="166 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="167 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">右肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="168 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="169 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="170 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="171 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="172 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">左手關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="173 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="174 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="175 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="176 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="177 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">右手關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="178 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="179 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="180 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="181 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="182 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">),</span>
<span class="linenos" data-linenos="183 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">360</span><span class="p">),</span>
<span class="linenos" data-linenos="184 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="185 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="186 "></span>
<span class="linenos" data-linenos="187 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="188 "></span>
<span class="linenos" data-linenos="189 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="190 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="191 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="192 "></span>    <span class="n">同步手與肩</span><span class="p">()</span>    
<span class="linenos" data-linenos="193 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="194 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="195 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="196 "></span>
<span class="linenos" data-linenos="197 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="198 "></span>        <span class="n">特徵清單</span> <span class="o">=</span> <span class="n">取出PoseLandmarks</span><span class="p">(</span><span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="199 "></span>        <span class="k">if</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="200 "></span>            <span class="n">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="201 "></span>
<span class="linenos" data-linenos="202 "></span>        <span class="n">設置手角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="203 "></span>        <span class="n">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>       
<span class="linenos" data-linenos="204 "></span>    <span class="n">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="205 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="206 "></span>
<span class="linenos" data-linenos="207 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/>
<br/></p>
<hr />
<h3 id="vtuber_1"><strong><em> 簡易Vtuber </em></strong></h3>
<hr />
<details class="example">
<summary>範例程式 簡易Vtuber - - - - - - - (程式閱讀 8/8)</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">💻程式碼</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="c1"># 需匯入頭6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1"># 需匯入自訂6面.png (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  3 "></span><span class="c1"># 需匯入星空.jpg (3D便利貼:材質-&gt;匯入)</span>
<span class="linenos" data-linenos="  4 "></span>
<span class="linenos" data-linenos="  5 "></span><span class="kn">from</span> <span class="nn">模擬3D模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  6 "></span><span class="kn">from</span> <span class="nn">視覺模組</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos" data-linenos="  7 "></span>
<span class="linenos" data-linenos="  8 "></span><span class="c1">##### 初始設定 </span>
<span class="linenos" data-linenos="  9 "></span><span class="n">舞台</span> <span class="o">=</span> <span class="n">模擬3D引擎</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
<span class="linenos" data-linenos=" 10 "></span><span class="n">攝影機</span> <span class="o">=</span> <span class="n">設置影像擷取</span><span class="p">(</span><span class="n">後端</span><span class="o">=</span><span class="s1">&#39;DSHOW&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 11 "></span><span class="n">偵測器</span> <span class="o">=</span> <span class="n">設置PoseDetection</span><span class="p">()</span>
<span class="linenos" data-linenos=" 12 "></span>
<span class="linenos" data-linenos=" 13 "></span><span class="c1"># 攝影機影像</span>
<span class="linenos" data-linenos=" 14 "></span><span class="n">螢幕</span> <span class="o">=</span> <span class="n">新增方形平面</span><span class="p">()</span>
<span class="linenos" data-linenos=" 15 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.4</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 16 "></span><span class="n">螢幕</span><span class="o">.</span><span class="n">位置x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>
<span class="linenos" data-linenos=" 17 "></span>
<span class="linenos" data-linenos=" 18 "></span><span class="c1"># 虛擬人物 頭 身體 手</span>
<span class="linenos" data-linenos=" 19 "></span><span class="n">頭</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 20 "></span><span class="n">頭</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;頭6面.png&#39;</span>
<span class="linenos" data-linenos=" 21 "></span><span class="n">頭</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 22 "></span><span class="n">頭</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="linenos" data-linenos=" 23 "></span>
<span class="linenos" data-linenos=" 24 "></span><span class="n">身體</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 25 "></span><span class="n">身體</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 26 "></span><span class="n">身體</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 27 "></span><span class="n">身體</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 28 "></span>
<span class="linenos" data-linenos=" 29 "></span><span class="n">左肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 30 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 31 "></span><span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 32 "></span>
<span class="linenos" data-linenos=" 33 "></span><span class="n">左手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 34 "></span><span class="n">左手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 35 "></span><span class="n">左手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 36 "></span><span class="n">左手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span><span class="n">右肩</span> <span class="o">=</span> <span class="n">新增物體</span><span class="p">()</span> <span class="c1"># 不顯示</span>
<span class="linenos" data-linenos=" 39 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">親代</span> <span class="o">=</span> <span class="n">身體</span>
<span class="linenos" data-linenos=" 40 "></span><span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 41 "></span>
<span class="linenos" data-linenos=" 42 "></span><span class="n">右手</span> <span class="o">=</span> <span class="n">新增6面貼圖方塊</span><span class="p">()</span>
<span class="linenos" data-linenos=" 43 "></span><span class="n">右手</span><span class="o">.</span><span class="n">中心點偏移</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 44 "></span><span class="n">右手</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 45 "></span><span class="n">右手</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;自訂6面.png&#39;</span>
<span class="linenos" data-linenos=" 46 "></span>
<span class="linenos" data-linenos=" 47 "></span><span class="n">上次身體轉向</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 靜止時穩定身體</span>
<span class="linenos" data-linenos=" 48 "></span>
<span class="linenos" data-linenos=" 49 "></span><span class="c1"># 感應區以(320,120)為中心 正方形邊長80</span>
<span class="linenos" data-linenos=" 50 "></span><span class="n">感應區x0</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">-</span> <span class="mi">80</span>  
<span class="linenos" data-linenos=" 51 "></span><span class="n">感應區y0</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">-</span> <span class="mi">80</span> 
<span class="linenos" data-linenos=" 52 "></span><span class="n">感應區x1</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 53 "></span><span class="n">感應區y1</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">+</span> <span class="mi">80</span>
<span class="linenos" data-linenos=" 54 "></span><span class="n">感應區中心x</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區x0</span> <span class="o">+</span> <span class="n">感應區x1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 55 "></span><span class="n">感應區中心y</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區y0</span> <span class="o">+</span> <span class="n">感應區y1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
<span class="linenos" data-linenos=" 56 "></span>
<span class="linenos" data-linenos=" 57 "></span><span class="c1"># 背景</span>
<span class="linenos" data-linenos=" 58 "></span><span class="n">背景</span> <span class="o">=</span> <span class="n">新增內面貼圖球體</span><span class="p">()</span>
<span class="linenos" data-linenos=" 59 "></span><span class="n">背景</span><span class="o">.</span><span class="n">材質貼圖</span> <span class="o">=</span> <span class="s1">&#39;星空.jpg&#39;</span>
<span class="linenos" data-linenos=" 60 "></span><span class="n">背景</span><span class="o">.</span><span class="n">縮放</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span><span class="c1">##### 函式區</span>
<span class="linenos" data-linenos=" 63 "></span><span class="k">def</span> <span class="nf">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 64 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos=" 65 "></span>    <span class="k">if</span> <span class="n">感應區x0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點x</span> <span class="o">&lt;</span> <span class="n">感應區x1</span> <span class="ow">and</span> \
<span class="linenos" data-linenos=" 66 "></span>              <span class="n">感應區y0</span> <span class="o">&lt;</span> <span class="n">鼻子特徵點y</span> <span class="o">&lt;</span> <span class="n">感應區y1</span> <span class="p">:</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="k">return</span> <span class="kc">True</span>
<span class="linenos" data-linenos=" 68 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos" data-linenos=" 70 "></span>
<span class="linenos" data-linenos=" 71 "></span><span class="k">def</span> <span class="nf">設置頭角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 72 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos=" 73 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 74 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos=" 75 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos=" 76 "></span>
<span class="linenos" data-linenos=" 77 "></span>    <span class="n">鼻子特徵點x</span><span class="p">,</span> <span class="n">鼻子特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    
<span class="linenos" data-linenos=" 78 "></span>    <span class="c1"># 頭旋轉y 左到右範圍: 90 ~ -90</span>
<span class="linenos" data-linenos=" 79 "></span>    <span class="k">if</span> <span class="n">鼻子特徵點x</span> <span class="o">&gt;</span> <span class="n">感應區中心x</span><span class="p">:</span> <span class="c1"># 向右</span>
<span class="linenos" data-linenos=" 80 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">鼻子特徵點x</span> <span class="o">-</span> <span class="n">感應區中心x</span><span class="p">)</span>
<span class="linenos" data-linenos=" 81 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos=" 82 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">delta</span>
<span class="linenos" data-linenos=" 83 "></span>    <span class="k">else</span><span class="p">:</span> <span class="c1"># 向左</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">感應區中心x</span> <span class="o">-</span> <span class="n">鼻子特徵點x</span>
<span class="linenos" data-linenos=" 85 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos=" 86 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">delta</span>
<span class="linenos" data-linenos=" 87 "></span>
<span class="linenos" data-linenos=" 88 "></span>    <span class="c1"># 頭旋轉y 下到上範圍: -90 ~ 90</span>
<span class="linenos" data-linenos=" 89 "></span>    <span class="c1"># y座標越往下越大</span>
<span class="linenos" data-linenos=" 90 "></span>    <span class="k">if</span> <span class="n">鼻子特徵點y</span> <span class="o">&gt;</span> <span class="n">感應區中心y</span><span class="p">:</span> <span class="c1"># 向下</span>
<span class="linenos" data-linenos=" 91 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">鼻子特徵點y</span> <span class="o">-</span> <span class="n">感應區中心y</span><span class="p">)</span>
<span class="linenos" data-linenos=" 92 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">60</span> <span class="k">else</span> <span class="o">-</span><span class="mi">60</span>
<span class="linenos" data-linenos=" 93 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos=" 94 "></span>    <span class="k">else</span><span class="p">:</span> <span class="c1"># 向上</span>
<span class="linenos" data-linenos=" 95 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">感應區中心y</span> <span class="o">-</span> <span class="n">鼻子特徵點y</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span>
<span class="linenos" data-linenos=" 96 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">60</span> <span class="k">else</span> <span class="mi">60</span>
<span class="linenos" data-linenos=" 97 "></span>        <span class="n">頭</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos=" 98 "></span>
<span class="linenos" data-linenos=" 99 "></span><span class="k">def</span> <span class="nf">設置身體角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="100 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="101 "></span>        <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="102 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos="103 "></span>
<span class="linenos" data-linenos="104 "></span>    <span class="k">global</span> <span class="n">上次身體轉向</span>
<span class="linenos" data-linenos="105 "></span>    <span class="c1"># 身體 旋轉y範圍 left 90 ~ right -90</span>
<span class="linenos" data-linenos="106 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="mf">0.2</span><span class="o">*</span><span class="p">(</span><span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="o">-</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">))</span>
<span class="linenos" data-linenos="107 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span> <span class="k">if</span> <span class="n">身體轉向</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos="108 "></span>    <span class="n">身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span> <span class="k">if</span> <span class="n">身體轉向</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos="109 "></span>    <span class="c1">#防抖動 保持穩定</span>
<span class="linenos" data-linenos="110 "></span>    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">身體轉向</span> <span class="o">-</span> <span class="n">上次身體轉向</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="linenos" data-linenos="111 "></span>        <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體轉向</span>
<span class="linenos" data-linenos="112 "></span>        <span class="n">上次身體轉向</span> <span class="o">=</span> <span class="n">身體轉向</span>
<span class="linenos" data-linenos="113 "></span>
<span class="linenos" data-linenos="114 "></span><span class="k">def</span> <span class="nf">設置手角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="115 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="116 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="117 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="118 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="119 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="120 "></span>        <span class="k">return</span>
<span class="linenos" data-linenos="121 "></span>
<span class="linenos" data-linenos="122 "></span>    <span class="c1"># 左手抬起 高度門檻值</span>
<span class="linenos" data-linenos="123 "></span>    <span class="n">左手特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>    
<span class="linenos" data-linenos="124 "></span>    <span class="k">if</span> <span class="n">左手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos="125 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">左手特徵點y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="126 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="127 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="128 "></span>
<span class="linenos" data-linenos="129 "></span>    <span class="c1"># 左肩特徵到左手特徵距離 決定旋轉z</span>
<span class="linenos" data-linenos="130 "></span>    <span class="n">左手特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>  
<span class="linenos" data-linenos="131 "></span>    <span class="n">左肩特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos" data-linenos="132 "></span>    <span class="k">if</span> <span class="n">左手特徵點x</span> <span class="o">&lt;</span> <span class="n">左肩特徵點x</span> <span class="ow">and</span> <span class="n">左手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos="133 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">左肩特徵點x</span> <span class="o">-</span> <span class="n">左手特徵點x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="134 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="k">else</span> <span class="mi">90</span>
<span class="linenos" data-linenos="135 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos="136 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="137 "></span>        <span class="n">左手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="138 "></span>
<span class="linenos" data-linenos="139 "></span>    <span class="c1"># 右手抬起 高度門檻值</span>
<span class="linenos" data-linenos="140 "></span>    <span class="n">右手特徵點y</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>    
<span class="linenos" data-linenos="141 "></span>    <span class="k">if</span> <span class="n">右手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos="142 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">360</span> <span class="o">-</span> <span class="n">右手特徵點y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="143 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="144 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="145 "></span>
<span class="linenos" data-linenos="146 "></span>    <span class="c1"># 右肩特徵到右手特徵距離 決定旋轉z</span>
<span class="linenos" data-linenos="147 "></span>    <span class="n">右手特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>  
<span class="linenos" data-linenos="148 "></span>    <span class="n">右肩特徵點x</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="linenos" data-linenos="149 "></span>    <span class="k">if</span> <span class="n">右手特徵點x</span> <span class="o">&gt;</span> <span class="n">右肩特徵點x</span> <span class="ow">and</span> <span class="n">右手特徵點y</span> <span class="o">&lt;</span> <span class="mi">360</span> <span class="p">:</span>
<span class="linenos" data-linenos="150 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">右手特徵點x</span> <span class="o">-</span> <span class="n">右肩特徵點x</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="linenos" data-linenos="151 "></span>        <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span> <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">90</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
<span class="linenos" data-linenos="152 "></span>        <span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
<span class="linenos" data-linenos="153 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="n">delta</span> 
<span class="linenos" data-linenos="154 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="155 "></span>        <span class="n">右手</span><span class="o">.</span><span class="n">旋轉z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="156 "></span>
<span class="linenos" data-linenos="157 "></span><span class="k">def</span> <span class="nf">同步手與肩</span><span class="p">():</span>
<span class="linenos" data-linenos="158 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">左肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="159 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">位置</span> <span class="o">=</span> <span class="n">右肩</span><span class="o">.</span><span class="n">全域位置</span>
<span class="linenos" data-linenos="160 "></span>    <span class="n">左手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="161 "></span>    <span class="n">右手</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">=</span> <span class="n">身體</span><span class="o">.</span><span class="n">旋轉y</span>
<span class="linenos" data-linenos="162 "></span>
<span class="linenos" data-linenos="163 "></span><span class="k">def</span> <span class="nf">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">):</span>
<span class="linenos" data-linenos="164 "></span>    <span class="n">畫矩形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="165 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x0</span><span class="p">,</span><span class="n">感應區y0</span><span class="p">),</span>
<span class="linenos" data-linenos="166 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區x1</span><span class="p">,</span><span class="n">感應區y1</span><span class="p">),</span>
<span class="linenos" data-linenos="167 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="168 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="169 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="170 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">感應區中心y</span><span class="p">),</span>
<span class="linenos" data-linenos="171 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="172 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="173 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">-</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="174 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="n">感應區中心x</span><span class="p">,</span><span class="n">感應區中心y</span><span class="o">+</span><span class="mi">10</span><span class="p">),</span>
<span class="linenos" data-linenos="175 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="176 "></span>
<span class="linenos" data-linenos="177 "></span><span class="k">def</span> <span class="nf">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="178 "></span>    <span class="n">陣列</span><span class="p">[</span><span class="mi">440</span><span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos" data-linenos="179 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="180 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;請將臉置於感應區內&#39;</span>
<span class="linenos" data-linenos="181 "></span>        <span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">]</span> <span class="o">=</span> \
<span class="linenos" data-linenos="182 "></span>            <span class="n">調整亮度</span><span class="p">(</span><span class="n">陣列</span><span class="p">[</span><span class="n">感應區y0</span><span class="p">:</span><span class="n">感應區y1</span><span class="p">,</span> <span class="n">感應區x0</span><span class="p">:</span><span class="n">感應區x1</span><span class="p">],</span> <span class="mi">80</span><span class="p">)</span>
<span class="linenos" data-linenos="183 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="184 "></span>        <span class="n">文字</span> <span class="o">=</span> <span class="s1">&#39;鼻子對準十字後，用頭與手控制VTuber&#39;</span>
<span class="linenos" data-linenos="185 "></span>
<span class="linenos" data-linenos="186 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="187 "></span>            <span class="n">text</span><span class="o">=</span><span class="n">文字</span><span class="p">,</span>
<span class="linenos" data-linenos="188 "></span>            <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">440</span><span class="p">))</span>
<span class="linenos" data-linenos="189 "></span>
<span class="linenos" data-linenos="190 "></span><span class="k">def</span> <span class="nf">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="191 "></span>    <span class="n">鼻關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos" data-linenos="192 "></span>    <span class="n">左肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="linenos" data-linenos="193 "></span>    <span class="n">左手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
<span class="linenos" data-linenos="194 "></span>    <span class="n">右肩關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
<span class="linenos" data-linenos="195 "></span>    <span class="n">右手關鍵點</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span>
<span class="linenos" data-linenos="196 "></span>    <span class="n">左肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos" data-linenos="197 "></span>    <span class="n">右肩深度</span> <span class="o">=</span> <span class="n">特徵清單</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">索引</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> 
<span class="linenos" data-linenos="198 "></span>
<span class="linenos" data-linenos="199 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="200 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">鼻關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="201 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="202 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
<span class="linenos" data-linenos="203 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="204 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="205 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">左肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="206 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="207 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="208 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="209 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="210 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">右肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="211 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="212 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="213 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="214 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="215 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">左手關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="216 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="217 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="218 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="219 "></span>    <span class="n">畫圓形</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="220 "></span>        <span class="n">center</span><span class="o">=</span><span class="n">右手關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="221 "></span>        <span class="n">radius</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos" data-linenos="222 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="223 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos" data-linenos="224 "></span>    <span class="n">畫直線</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="225 "></span>        <span class="n">pt1</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">),</span>
<span class="linenos" data-linenos="226 "></span>        <span class="n">pt2</span><span class="o">=</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">360</span><span class="p">),</span>
<span class="linenos" data-linenos="227 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="linenos" data-linenos="228 "></span>        <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="229 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="230 "></span>        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">左肩深度</span><span class="p">),</span>
<span class="linenos" data-linenos="231 "></span>        <span class="n">pos</span><span class="o">=</span><span class="n">左肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="232 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
<span class="linenos" data-linenos="233 "></span>    <span class="n">畫出文字</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">陣列</span><span class="p">,</span>
<span class="linenos" data-linenos="234 "></span>        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">右肩深度</span><span class="p">),</span>
<span class="linenos" data-linenos="235 "></span>        <span class="n">pos</span><span class="o">=</span><span class="n">右肩關鍵點</span><span class="p">,</span>
<span class="linenos" data-linenos="236 "></span>        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
<span class="linenos" data-linenos="237 "></span>
<span class="linenos" data-linenos="238 "></span><span class="c1">###### 主要迴圈</span>
<span class="linenos" data-linenos="239 "></span>
<span class="linenos" data-linenos="240 "></span><span class="k">def</span> <span class="nf">當更新時</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
<span class="linenos" data-linenos="241 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉y</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="242 "></span>    <span class="n">背景</span><span class="o">.</span><span class="n">旋轉x</span> <span class="o">+=</span> <span class="mf">0.1</span>
<span class="linenos" data-linenos="243 "></span>    <span class="n">同步手與肩</span><span class="p">()</span>    
<span class="linenos" data-linenos="244 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">擷取影像</span><span class="p">(</span><span class="n">攝影機</span><span class="p">)</span>
<span class="linenos" data-linenos="245 "></span>    <span class="n">陣列</span> <span class="o">=</span> <span class="n">左右翻轉</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="246 "></span>    <span class="n">結果</span> <span class="o">=</span> <span class="n">偵測器</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="247 "></span>
<span class="linenos" data-linenos="248 "></span>    <span class="k">if</span> <span class="n">結果</span><span class="p">:</span>
<span class="linenos" data-linenos="249 "></span>        <span class="n">特徵清單</span> <span class="o">=</span> <span class="n">取出PoseLandmarks</span><span class="p">(</span><span class="n">結果</span><span class="p">)</span>
<span class="linenos" data-linenos="250 "></span>        <span class="k">if</span> <span class="n">鼻子在感應區嗎</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">):</span>
<span class="linenos" data-linenos="251 "></span>            <span class="n">標記偵測位置</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="252 "></span>        <span class="n">設置頭角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="253 "></span>        <span class="n">設置身體角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="254 "></span>        <span class="n">設置手角度</span><span class="p">(</span><span class="n">特徵清單</span><span class="p">)</span>
<span class="linenos" data-linenos="255 "></span>        <span class="n">繪製介面</span><span class="p">(</span><span class="n">陣列</span><span class="p">,</span> <span class="n">特徵清單</span><span class="p">)</span>       
<span class="linenos" data-linenos="256 "></span>    <span class="n">畫感應區</span><span class="p">(</span><span class="n">陣列</span><span class="p">)</span>
<span class="linenos" data-linenos="257 "></span>    <span class="n">螢幕</span><span class="o">.</span><span class="n">多維陣列貼圖</span> <span class="o">=</span> <span class="n">陣列</span>
<span class="linenos" data-linenos="258 "></span>
<span class="linenos" data-linenos="259 "></span><span class="n">模擬主迴圈</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><br/><br/><br/> </p>
<hr />
<h2 id="_9">📗 姿勢偵測應用</h2>
<hr />
<p><br/></p>
<p>長青中心 健康體感互動</p>
<dl>
<dt><br/> </dt>
<dd>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/py_3iG32_Is" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
</dd>
<dd>
<p><sup>(1分37秒, 資料來源:</sup><sup id="fnref:for_elder_citizen"><a class="footnote-ref" href="#fn:for_elder_citizen">4</a></sup><sup>)</sup></p>
</dd>
</dl>
<p><br/></p>
<p>台灣的運動科技輔助(拳擊)</p>
<dl>
<dt><br/></dt>
<dd>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/gu33VzAU8qo?start=236&amp;end=276" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
</dd>
<dd>
<p><sup>(40秒, 資料來源:</sup><sup id="fnref:sport_technology"><a class="footnote-ref" href="#fn:sport_technology">5</a></sup><sup>)</sup></p>
</dd>
</dl>
<p><br/><br/><br/> </p>
<div class="footnote">
<hr />
<ol>
<li id="fn:what_is_vtuber">
<p>VTuber靠粉絲抖內比上班族還賺？揭露虛擬YouTuber勞動的血汗面｜公視P# 新聞實驗室, by 公視P#新聞實驗室 , <a href="https://youtu.be/Kxgve6-gQFI">youtube連結</a>&#160;<a class="footnote-backref" href="#fnref:what_is_vtuber" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:immanuelle_wave">
<p>維基百科 VTuber , https://zh.wikipedia.org/zh-tw/VTuber&#160;<a class="footnote-backref" href="#fnref:immanuelle_wave" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:pose_landmarks">
<p>mediapipe , https://developers.google.com/mediapipe/solutions/vision/pose_landmarker&#160;<a class="footnote-backref" href="#fnref:pose_landmarks" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:for_elder_citizen">
<p>高市長青中心 推出AI加AR健康體感互動【客家新聞20220917】, by 客家新聞 Hakka News , <a href="https://youtu.be/py_3iG32_Is">youtube連結</a>&#160;<a class="footnote-backref" href="#fnref:for_elder_citizen" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:sport_technology">
<p>運動科學輔助，為台灣運動員增加優勢！｜運動選手的第三隻眼｜公視 獨立特派員 第804集 20230607, by 公共電視-獨立特派員 PTS INNEWS , <a href="https://youtu.be/gu33VzAU8qo">youtube連結</a>&#160;<a class="footnote-backref" href="#fnref:sport_technology" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
</ol>
</div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Wen-Hung, Chang 張文宏.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/beardad1975" target="_blank" rel="noopener" title="beardad1975 on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="mailto:beardad1975@nmes.tyc.edu.tw" target="_blank" rel="noopener" title="beardad1975 email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.22074ed6.min.js", "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e\uff1f\uff1b]+", "search.placeholder": "\u641c\u5c0b", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.960e086b.min.js"></script>
      
    
  </body>
</html>